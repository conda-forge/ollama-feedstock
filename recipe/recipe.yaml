context:
  version: "0.5.12"

package:
  name: ollama
  version: ${{ version }}

source:
  url: https://github.com/ollama/ollama/archive/refs/tags/v${{ version }}.tar.gz
  sha256: a38d5e3ce4ee13d237ef670231016d02ee81cb880f38d58795e989c73b5b7523

build:
  number: 0
  script:
    - if: win
      then: [build.bat]
      else: [build.sh]

requirements:
  build:
    - ${{ compiler('go-cgo') }}
    - cmake
    - make
    - go-licenses
    - if: win
      then: ${{ stdlib("m2w64_c") }}
      else: ${{ stdlib('c') }}
    - if: win
      then: ${{ compiler('m2w64_cxx') }}
      else: ${{ compiler('cxx') }}

tests:
  - script:
      - ollama --version

about:
  homepage: https://ollama.com/
  repository: https://github.com/ollama/ollama
  documentation: https://github.com/ollama/ollama
  summary: Ollama CLI
  description: |
    Ollama is an easy way to get local language models running on your computer through a command-line interface.
  license: MIT
  license_file:
    - LICENSE
    # These license files are generated at build time in the `build.sh` script
    # from all the dependencies of `temporal.io`.
    - license-files/

extra:
  recipe-maintainers:
    - benmoss
